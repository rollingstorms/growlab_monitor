<div class="sensor-widget" id="sensor-{{ device.id }}"
     data-metrics='{{ device.metrics | tojson }}'>
  <h2>{{ device.name }}</h2>

  <div class="sensor-current">
    {% for m in device.metrics %}
    <p>
      <strong>{{ m.label }}:</strong>
      <span class="sensor-{{ m.name }}">--</span>
    </p>
    {% endfor %}
  </div>

  <div class="sensor-charts">
    {% for m in device.metrics %}
      <div class="chart-wrapper" style="position: relative; height: 200px; margin-bottom: 20px;">
        <canvas id="chart-{{ m.name }}-{{ device.id }}" width="400" height="200"></canvas>
      </div>
    {% endfor %}
  </div>
  <div class="sensor-data-table">
    <table>
      <thead>
        <tr>
          <th>Timestamp</th>
          {% for m in device.metrics %}
            <th>{{ m.label }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody id="table-{{ device.id }}"></tbody>
    </table>
  </div>
</div>